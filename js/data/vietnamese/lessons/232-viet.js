export const lesson_232_viet = {
    "topic": "Ti·∫øng Vi·ªát 5",
    "week": "23",
    "period": "160",
    "title": "VI·∫æT: T√åM √ù CHO ƒêO·∫†N VƒÇN TH·ªÇ HI·ªÜN T√åNH C·∫¢M, C·∫¢M X√öC V·ªÄ M·ªòT S·ª∞ VI·ªÜC",
    "desc": "Vi·∫øt: T√¨m √Ω cho ƒëo·∫°n vƒÉn th·ªÉ hi·ªán t√¨nh c·∫£m, c·∫£m x√∫c v·ªÅ m·ªôt s·ª± vi·ªác",
    "subject": "Vi·∫øt",
    "theme": "H∆∞∆°ng s·∫Øc trƒÉm mi·ªÅn",
    "audio": "",
    "content": `

<style>
                                .label-viet { color: #ef4444; font-weight: 800; border: 2px solid #ef4444; padding: 2px 16px; display: inline-block; border-top-right-radius: 20px; border-bottom-right-radius: 20px; margin-bottom: 24px; letter-spacing: 0.05em; background: rgba(254, 226, 226, 0.3); }
                                .side-label { writing-mode: vertical-rl; transform: rotate(180deg); display: flex; align-items: center; justify-content: center; font-weight: 900; color: white; text-transform: uppercase; letter-spacing: 0.1em; border-radius: 16px; padding: 12px; width: 60px; min-height: 120px; flex-shrink: 0; }
                                .writing-block { display: flex; gap: 16px; margin-bottom: 20px; align-items: stretch; transition: transform 0.3s; }
                                .writing-block:hover { transform: translateX(5px); }
                                .writing-content { flex: 1; position: relative; }
                                .writing-prompt { position: absolute; top: -12px; left: 24px; background: white; padding: 2px 12px; font-size: 0.9rem; font-weight: 700; border-radius: 10px; z-index: 10; border: 1px solid currentColor; }
                                .writing-textarea { width: 100%; border-radius: 24px; padding: 24px 20px 20px 20px; border: 2px solid #e2e8f0; background: #fff; min-height: 120px; font-family: 'Merriweather', serif; font-size: 1.15rem; line-height: 1.8; outline: none; transition: all 0.3s; }
                                .writing-textarea:focus { border-color: currentColor; box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.05); }
                            </style>
                            <div class="space-y-12 animate-in fade-in duration-700 max-w-5xl mx-auto">
                        <!-- SECTION: CH·ªåN ƒê·ªÄ -->
                        <section class="w-full">
                            <div class="glass-card rounded-[40px] p-6 md:p-10 shadow-2xl relative overflow-hidden ring-1 ring-blue-100 bg-white/80">
                                <div class="bg-amber-100/50 rounded-3xl p-6 border-l-8 border-amber-500 mb-8">
                                    <h3 class="text-2xl font-black text-amber-900 mb-2 font-merriweather">Ch·ªçn m·ªôt trong nh·ªØng ƒë·ªÅ d∆∞·ªõi ƒë√¢y:</h3>
                                    <ul class="space-y-3 text-lg font-bold text-amber-800">
                                        <li class="flex items-start gap-3"><span class="shrink-0">ƒê·ªÅ 1:</span> <span>Vi·∫øt ƒëo·∫°n vƒÉn th·ªÉ hi·ªán t√¨nh c·∫£m, c·∫£m x√∫c v·ªÅ m·ªôt l·ªÖ h·ªôi c·ªßa qu√™ h∆∞∆°ng.</span></li>
                                        <li class="flex items-start gap-3"><span class="shrink-0">ƒê·ªÅ 2:</span> <span>Vi·∫øt ƒëo·∫°n vƒÉn th·ªÉ hi·ªán t√¨nh c·∫£m, c·∫£m x√∫c v·ªÅ m·ªôt bu·ªïi ho·∫°t ƒë·ªông ngo·∫°i kho√° c·ªßa tr∆∞·ªùng ho·∫∑c l·ªõp em.</span></li>
                                        <li class="flex items-start gap-3"><span class="shrink-0">ƒê·ªÅ 3:</span> <span>Vi·∫øt ƒëo·∫°n vƒÉn th·ªÉ hi·ªán t√¨nh c·∫£m, c·∫£m x√∫c v·ªÅ ho·∫°t ƒë·ªông g√≥i b√°nh ch∆∞ng ho·∫∑c b√°nh t√©t ng√†y T·∫øt.</span></li>
                                    </ul>
                                </div>

                                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
                                    <div class="group relative overflow-hidden rounded-3xl shadow-lg border-4 border-white transition-all hover:scale-105">
                                        <img src="hinh_anh/tiengviet/viet232_topic1.png" alt="L·ªÖ h·ªôi" class="w-full h-48 object-cover">
                                        <div class="absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/80 to-transparent p-4">
                                            <p class="text-white font-black text-center">L·ªÖ h·ªôi qu√™ h∆∞∆°ng</p>
                                        </div>
                                    </div>
                                    <div class="group relative overflow-hidden rounded-3xl shadow-lg border-4 border-white transition-all hover:scale-105">
                                        <img src="hinh_anh/tiengviet/viet232_topic2.png" alt="Ngo·∫°i kh√≥a" class="w-full h-48 object-cover">
                                        <div class="absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/80 to-transparent p-4">
                                            <p class="text-white font-black text-center">Ho·∫°t ƒë·ªông ngo·∫°i kh√≥a</p>
                                        </div>
                                    </div>
                                    <div class="group relative overflow-hidden rounded-3xl shadow-lg border-4 border-white transition-all hover:scale-105">
                                        <img src="hinh_anh/tiengviet/viet232_topic3.png" alt="G√≥i b√°nh" class="w-full h-48 object-cover">
                                        <div class="absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/80 to-transparent p-4">
                                            <p class="text-white font-black text-center">G√≥i b√°nh ng√†y T·∫øt</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- 1. CHU·∫®N B·ªä -->
                                <div class="mb-12">
                                    <div class="flex items-center space-x-4 mb-6">
                                        <div class="w-10 h-10 bg-rose-500 rounded-full flex items-center justify-center shadow-lg text-white font-black">1</div>
                                        <h2 class="text-3xl font-black text-gray-800 uppercase tracking-tight">Chu·∫©n b·ªã</h2>
                                    </div>
                                    <div class="bg-rose-50 rounded-3xl p-8 border-2 border-rose-100 shadow-inner">
                                        <ul class="list-disc ml-6 space-y-4 text-xl text-gray-700 leading-relaxed font-medium">
                                            <li>L·ª±a ch·ªçn s·ª± vi·ªác m√† em mu·ªën th·ªÉ hi·ªán t√¨nh c·∫£m, c·∫£m x√∫c.</li>
                                            <li>Ghi ch√©p l·∫°i nh·ªØng chi ti·∫øt n·ªïi b·∫≠t c·ªßa s·ª± vi·ªác, ghi ng·∫Øn g·ªçn t√¨nh c·∫£m, c·∫£m x√∫c c·ªßa em v·ªÅ nh·ªØng chi ti·∫øt ƒë√≥.</li>
                                        </ul>
                                    </div>
                                </div>

                                <!-- 2. T√åM √ù -->
                                <div class="mb-12">
                                    <div class="flex items-center space-x-4 mb-8">
                                        <div class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center shadow-lg text-white font-black">2</div>
                                        <h2 class="text-3xl font-black text-gray-800 uppercase tracking-tight">T√¨m √Ω</h2>
                                    </div>
                                    <p class="text-sm text-blue-600 font-bold mb-6 italic flex items-center gap-1">
                                        <span>üí° M·∫πo: Nh·∫•n n√∫t üéôÔ∏è c·∫°nh c√¢u h·ªèi ƒë·ªÉ tr·∫£ l·ªùi b·∫±ng gi·ªçng n√≥i cho nhanh nh√©!</span>
                                    </p>
                                    
                                    <div class="relative space-y-6 mb-10">
                                        <!-- M·ªü b√†i -->
                                        <div class="writing-block" style="color: #f97316;">
                                            <div class="side-label bg-gradient-to-t from-orange-400 to-orange-600 shadow-lg shadow-orange-100">M·ªü b√†i</div>
                                            <div class="writing-content">
                                                <div class="writing-prompt text-orange-600 font-bold flex items-center gap-2">
                                                    <span>S·ª± vi·ªác m√† em mu·ªën th·ªÉ hi·ªán t√¨nh c·∫£m, c·∫£m x√∫c l√† g√¨? S·ª± vi·ªác ƒë√≥ di·ªÖn ra khi n√†o? ·ªû ƒë√¢u?</span>
                                                    <button onclick="toggleSpeech('v232-mb')" class="p-1.5 bg-orange-100 text-orange-600 rounded-full hover:bg-orange-200 transition-all text-xs shadow-sm" title="Nh·∫≠p b·∫±ng gi·ªçng n√≥i">üéôÔ∏è</button>
                                                </div>
                                                <textarea id="v232-mb" class="writing-textarea border-orange-100 focus:border-orange-500" placeholder="Nh·∫≠p √Ω c·ªßa em..."></textarea>
                                            </div>
                                        </div>

                                        <!-- Th√¢n b√†i -->
                                        <div class="writing-block" style="color: #06b6d4;">
                                            <div class="side-label bg-gradient-to-t from-cyan-400 to-cyan-600 shadow-lg shadow-cyan-100">Th√¢n b√†i</div>
                                            <div class="writing-content">
                                                <div class="writing-prompt text-cyan-600 font-bold flex items-center gap-2">
                                                    <span>Em c√≥ t√¨nh c·∫£m, c·∫£m x√∫c g√¨ v·ªÅ nh·ªØng chi ti·∫øt n·ªïi b·∫≠t c·ªßa s·ª± vi·ªác (khung c·∫£nh, ho·∫°t ƒë·ªông, ng∆∞·ªùi tham gia,...)?</span>
                                                    <button onclick="toggleSpeech('v232-tb')" class="p-1.5 bg-cyan-100 text-cyan-600 rounded-full hover:bg-cyan-200 transition-all text-xs shadow-sm" title="Nh·∫≠p b·∫±ng gi·ªçng n√≥i">üéôÔ∏è</button>
                                                </div>
                                                <textarea id="v232-tb" class="writing-textarea border-cyan-100 focus:border-cyan-500" placeholder="Nh·∫≠p √Ω c·ªßa em..." style="min-height: 350px;"></textarea>
                                            </div>
                                        </div>

                                        <!-- K·∫øt b√†i -->
                                        <div class="writing-block" style="color: #10b981;">
                                            <div class="side-label bg-gradient-to-t from-emerald-400 to-emerald-600 shadow-lg shadow-emerald-100">K·∫øt b√†i</div>
                                            <div class="writing-content">
                                                <div class="writing-prompt text-emerald-600 font-bold flex items-center gap-2">
                                                    <span>N√™u √Ω nghƒ©a c·ªßa s·ª± vi·ªác; kh·∫≥ng ƒë·ªãnh l·∫°i t√¨nh c·∫£m, c·∫£m x√∫c ƒë·ªëi v·ªõi s·ª± vi·ªác.</span>
                                                    <button onclick="toggleSpeech('v232-kb')" class="p-1.5 bg-emerald-100 text-emerald-600 rounded-full hover:bg-emerald-200 transition-all text-xs shadow-sm" title="Nh·∫≠p b·∫±ng gi·ªçng n√≥i">üéôÔ∏è</button>
                                                </div>
                                                <textarea id="v232-kb" class="writing-textarea border-emerald-100 focus:border-emerald-500" placeholder="Nh·∫≠p √Ω c·ªßa em..."></textarea>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- 3. G√ìP √ù V√Ä CH·ªàNH S·ª¨A -->
                                <div>
                                    <div class="flex items-center space-x-4 mb-6">
                                        <div class="w-10 h-10 bg-indigo-600 rounded-full flex items-center justify-center shadow-lg text-white font-black">3</div>
                                        <h2 class="text-3xl font-black text-gray-800 uppercase tracking-tight">G√≥p √Ω v√† ch·ªânh s·ª≠a</h2>
                                    </div>
                                    <div class="bg-indigo-50 rounded-3xl p-8 border-2 border-indigo-100 shadow-inner">
                                        <div class="space-y-4">
                                            <label class="flex items-center gap-4 bg-white p-4 rounded-2xl cursor-pointer hover:bg-indigo-100/50 transition-colors">
                                                <input type="checkbox" class="w-6 h-6 rounded-lg text-indigo-600 focus:ring-indigo-500">
                                                <span class="text-lg font-bold text-gray-700">C√°c √Ω c√≥ ƒë∆∞·ª£c s·∫Øp x·∫øp h·ª£p l√Ω v√† ph√π h·ª£p v·ªõi b·ªë c·ª•c kh√¥ng?</span>
                                            </label>
                                            <label class="flex items-center gap-4 bg-white p-4 rounded-2xl cursor-pointer hover:bg-indigo-100/50 transition-colors">
                                                <input type="checkbox" class="w-6 h-6 rounded-lg text-indigo-600 focus:ring-indigo-500">
                                                <span class="text-lg font-bold text-gray-700">C√≥ th·ªÉ hi·ªán ƒë∆∞·ª£c t√¨nh c·∫£m, c·∫£m x√∫c v·ªÅ nh·ªØng chi ti·∫øt n·ªïi b·∫≠t kh√¥ng?</span>
                                            </label>
                                        </div>
                                        
                                        <div class="mt-8 p-6 bg-white rounded-[32px] shadow-xl border border-indigo-100">
                                            <p class="text-xl font-bold text-gray-800 mb-4 font-merriweather italic">Em h√£y nh·∫•n n√∫t b√™n d∆∞·ªõi ƒë·ªÉ h·ªá th·ªëng h·ªó tr·ª£ em t√¨m √Ω v√† ho√†n thi·ªán ƒëo·∫°n vƒÉn nh√©!</p>
                                            <div class="flex flex-wrap gap-4">
                                                <button onclick="checkAI_232Viet()" class="px-8 py-3 bg-rose-600 text-white text-lg font-black rounded-2xl shadow-lg hover:bg-rose-700 active:scale-95 flex items-center gap-2">
                                                    <div class="w-6 h-6 bg-white rounded-lg flex items-center justify-center text-rose-600 font-black text-xs shadow-sm">E</div>
                                                    CH·∫§M B√ÄI
                                                </button>
                                                <button onclick="reset232Viet()" class="px-6 py-4 bg-gray-200 text-gray-700 font-bold rounded-2xl hover:bg-gray-300 transition-all flex items-center gap-2">
                                                    L√ÄM L·∫†I
                                                </button>
                                                <button onclick="submitV232() " class="px-10 py-4 bg-gray-900 text-white font-black text-xl rounded-2xl shadow-lg hover:bg-black active:scale-95 transition-all ml-auto flex items-center gap-2">
                                                    <div class="w-6 h-6 bg-white rounded-lg flex items-center justify-center text-gray-900 font-black text-xs shadow-sm">E</div>
                                                    <span>N·ªòP B√ÄI T√åM √ù</span>
                                                </button>
                                            </div>
                                            <div id="fb-232-viet" class="hidden mt-6 p-8 bg-indigo-900 text-white rounded-[28px] shadow-2xl animate-in slide-in-from-top-10"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>
`,
    "practice": `

`,
    "quizPool": [
    {
        "question": "Khi vi·∫øt ƒëo·∫°n vƒÉn th·ªÉ hi·ªán t√¨nh c·∫£m, c·∫£m x√∫c, em n√™n d√πng ng√¥i k·ªÉ n√†o?",
        "options": [
            "Ng√¥i th·ª© nh·∫•t (t√¥i, em)",
            "Ng√¥i th·ª© ba (g·ªçi t√™n)",
            "Kh√¥ng c·∫ßn x∆∞ng h√¥",
            "Ng√¥i th·ª© hai (b·∫°n)"
        ],
        "answer": 0,
        "level": 1
    },
    {
        "question": "T·ª´ ng·ªØ n√†o d∆∞·ªõi ƒë√¢y ch·ªâ t√¨nh c·∫£m, c·∫£m x√∫c?",
        "options": [
            "Vui s∆∞·ªõng",
            "ƒêi l·∫°i",
            "H·ªçc t·∫≠p",
            "C√°i b√†n"
        ],
        "answer": 0,
        "level": 1
    },
    {
        "question": "Ph·∫ßn m·ªü ƒë·∫ßu c·ªßa ƒëo·∫°n vƒÉn bi·ªÉu c·∫£m c·∫ßn gi·ªõi thi·ªáu ƒëi·ªÅu g√¨?",
        "options": [
            "S·ª± vi·ªác v√† ·∫•n t∆∞·ª£ng chung",
            "K·∫øt qu·∫£ c·ªßa s·ª± vi·ªác",
            "T·∫•t c·∫£ c√°c nh√¢n v·∫≠t",
            "L·ªãch s·ª≠ v√πng ƒë·∫•t"
        ],
        "answer": 0,
        "level": 1
    },
    {
        "question": "N√™n k·∫øt h·ª£p c√°c bi·ªán ph√°p tu t·ª´ n√†o ƒë·ªÉ ƒëo·∫°n vƒÉn th√™m sinh ƒë·ªông?",
        "options": [
            "So s√°nh, nh√¢n h√≥a",
            "Con s·ªë th·ªëng k√™",
            "Thu·∫≠t ng·ªØ khoa h·ªçc",
            "C√¢u h·ªèi tu t·ª´"
        ],
        "answer": 0,
        "level": 1
    },
    {
        "question": "Ph·∫ßn k·∫øt th√∫c ƒëo·∫°n vƒÉn th∆∞·ªùng d√πng ƒë·ªÉ l√†m g√¨?",
        "options": [
            "Kh·∫≥ng ƒë·ªãnh t√¨nh c·∫£m v√† n√™u √Ω nghƒ©a",
            "B·∫Øt ƒë·∫ßu k·ªÉ m·ªôt s·ª± vi·ªác m·ªõi",
            "T·∫£ l·∫°i ngo·∫°i h√¨nh",
            "C·∫£m ∆°n ng∆∞·ªùi ƒë·ªçc"
        ],
        "answer": 2,
        "level": 1
    }
]
};

// --- LOGIC ---
window.checkAI_232Viet = async function () {
    const mb = document.getElementById('v232-mb').value.trim();
    const tb = document.getElementById('v232-tb').value.trim();
    const kb = document.getElementById('v232-kb').value.trim();

    if (!mb || !tb || !kb) {
        alert("Em h√£y ƒëi·ªÅn ƒë·ªß √Ω cho c·∫£ 3 ph·∫ßn M·ªü b√†i, Th√¢n b√†i v√† K·∫øt b√†i nh√©!");
        return;
    }

    const fb = document.getElementById('fb-232-viet');
    fb.classList.remove('hidden');
    fb.innerHTML = `<div class="flex items-center gap-4"><div class="animate-spin rounded-full h-8 w-8 border-4 border-white border-t-transparent"></div><p class="text-xl font-bold italic">H·ªá th·ªëng ƒëang xem qua c√°c √Ω c·ªßa em...</p></div>`;

    if (typeof askAI === 'function') {
        const prompt = `Em h√£y nh·∫≠n x√©t c√°c √Ω t∆∞·ªüng cho ƒëo·∫°n vƒÉn c·ªßa h·ªçc sinh. 
        ƒê·ªÅ b√†i li√™n quan ƒë·∫øn 1 trong 3 ch·ªß ƒë·ªÅ: L·ªÖ h·ªôi, Ngo·∫°i kh√≥a, ho·∫∑c G√≥i b√°nh ch∆∞ng/t√©t.
        C√°c √Ω c·ªßa h·ªçc sinh:
        - M·ªü b√†i: ${mb}
        - Th√¢n b√†i: ${tb}
        - K·∫øt b√†i: ${kb}
        
        Y√™u c·∫ßu nh·∫≠n x√©t:
        1. C√°c √Ω ƒë√£ ƒë·ªß ƒë·ªÉ vi·∫øt th√†nh ƒëo·∫°n vƒÉn ch∆∞a?
        2. C·∫£m x√∫c c√≥ ƒë∆∞·ª£c th·ªÉ hi·ªán r√µ n√©t qua c√°c chi ti·∫øt n·ªïi b·∫≠t kh√¥ng?
        3. G·ª£i √Ω th√™m m·ªôt s·ªë t·ª´ ng·ªØ ho·∫∑c h√¨nh ·∫£nh so s√°nh ƒë·ªÉ ƒëo·∫°n vƒÉn hay h∆°n.
        4. Vi·∫øt m·ªôt ƒëo·∫°n vƒÉn m·∫´u ng·∫Øn d·ª±a tr√™n c√°c √Ω n√†y ƒë·ªÉ em tham kh·∫£o.
        Cu·ªëi c√πng, h√£y CH·∫§M ƒêI·ªÇM c√°c √Ω t∆∞·ªüng n√†y tr√™n thang ƒëi·ªÉm 10 theo ƒë·ªãnh d·∫°ng: "ƒêi·ªÉm d·ª± ki·∫øn: X/10".`;

        const studentWork = `M·ªü b√†i: ${mb}\nTh√¢n b√†i: ${tb}\nK·∫øt b√†i: ${kb}`;

        try {
            const res = await fetch(window.AI_API_URL, {
                method: 'POST',
                body: JSON.stringify({
                    sentence: prompt,
                    mode: 'chat',
                    persona: 'tlv'
                })
            });
            const data = await res.json();
            const reply = typeof data === 'string' ? data : (data.response || data.content || "Th·∫ßy ch∆∞a nghƒ© ra nh·∫≠n x√©t n√†o.");

            // Extract score
            const scoreMatch = reply.match(/ƒêi·ªÉm d·ª± ki·∫øn:.*?(\d+\.?\d*)\/10/i) || reply.match(/(\d+\.?\d*)\/10/);
            const score = scoreMatch ? scoreMatch[1] : null;
            window.v232_aiGrade = score;

            if (fb) {
                fb.innerHTML = `
                    <div class="space-y-4">
                        <div class="flex items-center justify-between border-b border-indigo-400 pb-2 mb-2">
                            <div class="flex items-center gap-2 text-white font-black">
                                <span class="text-2xl">‚úçÔ∏è</span> G√ìP √ù T·ª™ EDUROBOT
                            </div>
                            ${score ? `<div class="bg-amber-400 text-indigo-900 px-4 py-1 rounded-full font-black text-xl shadow-lg animate-bounce">ƒêI·ªÇM: ${score}/10</div>` : ''}
                        </div>
                        <div class="text-white leading-relaxed text-lg">${reply.replace(/\n/g, '<br>').replace(/\*\*/g, '<b>')}</div>
                    </div>
                `;
            }
        } catch (e) { fb.innerHTML = "L·ªói k·∫øt n·ªëi EduRobot. Th·ª≠ l·∫°i sau em nh√©!"; }
    } else {
        fb.innerHTML = "L·ªói: H·ªá th·ªëng AI ch∆∞a s·∫µn s√†ng.";
    }
};

window.reset232Viet = function () {
    document.getElementById('v232-mb').value = '';
    document.getElementById('v232-tb').value = '';
    document.getElementById('v232-kb').value = '';
    document.getElementById('fb-232-viet').classList.add('hidden');
    const inputs = document.querySelectorAll('input[type="checkbox"]');
    inputs.forEach(i => i.checked = false);
};

window.submitV232 = function () {
    if (typeof submitLTVCUnified === 'function') {
        submitLTVCUnified('232-viet');
    } else { alert("H·ªá th·ªëng n·ªôp b√†i ƒëang b·∫≠n!"); }
};

if (!lesson_232_viet.period) lesson_232_viet.period = '160';
if (!lesson_232_viet.id) lesson_232_viet.id = "232-viet";
