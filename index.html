<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªá th·ªëng H·ªçc t·∫≠p EduRobot - L·ªõp 5</title>
    <!-- CSS Dependencies -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
        }
    </script>
    <link rel="stylesheet" href="css/index.css">
</head>

<body class="flex flex-col min-h-screen">
    <header class="sticky top-0 z-50 px-4 py-2">
        <nav
            class="container mx-auto glass-card rounded-2xl px-5 py-2 flex justify-between items-center shadow-lg dark:shadow-slate-900/50">
            <div class="flex items-center space-x-4">
                <a href="#" onclick="router.goHome(); return false;" class="flex items-center gap-3 group">
                    <div
                        class="w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center text-white font-black text-xl shadow-lg shadow-blue-200 dark:shadow-blue-900 group-hover:scale-110 transition-transform">
                        E</div>
                    <div class="flex items-center gap-2">
                        <span class="text-xl font-black text-blue-600 dark:text-blue-400 leading-none">EduRobot</span>
                        <div id="subject-badge"
                            class="hidden px-2 py-1 rounded-lg text-[10px] font-black text-white uppercase tracking-tighter">
                        </div>
                    </div>
                </a>
                <div id="navbar-metadata"
                    class="hidden md:flex items-center space-x-4 border-l-2 border-gray-100 dark:border-slate-700 pl-4">
                    <!-- Metadata (Ch·ªß ƒëi·ªÉm | Tu·∫ßn | B√†i) s·∫Ω ƒë∆∞·ª£c ch√®n ·ªü ƒë√¢y -->
                </div>
            </div>
            <div class="flex items-center gap-6">
                <ul id="navbar-menu"
                    class="flex space-x-6 text-[11px] font-black items-center uppercase tracking-wider">
                    <li id="menu-subjects-container" class="relative group hidden">
                        <!-- Dropdown m√¥n h·ªçc s·∫Ω ƒë∆∞·ª£c ch√®n ·ªü ƒë√¢y -->
                    </li>
                    <li><a href="#" onclick="router.goHome(); return false;"
                            class="text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors py-2">Trang
                            ch·ªß</a></li>
                    <li><button onclick="toggleFullScreen()" title="To√†n m√†n h√¨nh"
                            class="text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors py-2 flex items-center justify-center group">
                            <svg class="w-5 h-5 md:w-6 md:h-6 group-hover:scale-110 transition-transform" fill="none"
                                stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4">
                                </path>
                            </svg>
                        </button></li>
                    <li><button onclick="toggleDarkMode()" title="Ch·∫ø ƒë·ªô t·ªëi"
                            class="text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors py-2 flex items-center justify-center group">
                            <svg id="dark-mode-icon"
                                class="w-5 h-5 md:w-6 md:h-6 group-hover:scale-110 transition-transform" fill="none"
                                stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z">
                                </path>
                            </svg>
                        </button></li>
                    <li class="hidden md:block"><button title="Chia s·∫ª"
                            class="text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors py-2 flex items-center justify-center group">
                            <svg class="w-5 h-5 md:w-6 md:h-6 group-hover:scale-110 transition-transform" fill="none"
                                stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z">
                                </path>
                            </svg>
                        </button></li>
                    <li><button onclick="openTeacherAuthModal()"
                            class="bg-blue-50 dark:bg-blue-900/50 text-blue-600 dark:text-blue-400 font-black px-4 py-2 rounded-xl border border-blue-100 dark:border-blue-800 transition-all hover:bg-blue-100 dark:hover:bg-blue-900 active:scale-95">Gi√°o
                            vi√™n</button></li>
                </ul>
            </div>
        </nav>
    </header>

    <!-- Slogan Banner: N·ªïi b·∫≠t & Hi·ªán ƒë·∫°i -->
    <div
        class="bg-gradient-to-r from-blue-700 via-indigo-600 to-blue-800 dark:from-blue-900 dark:via-indigo-900 dark:to-blue-950 py-2 relative overflow-hidden shadow-lg z-40">
        <div class="container mx-auto px-4 text-center relative z-10">
            <p class="text-yellow-300 text-[11px] md:text-sm font-black uppercase tracking-[0.3em] animate-pulse-slow"
                style="text-shadow: 0 0 10px rgba(253, 224, 71, 0.5), 2px 2px 4px rgba(0,0,0,0.3);">
                C√πng EduRobot chinh ph·ª•c tri th·ª©c, v·ªØng b∆∞·ªõc v√†o t∆∞∆°ng lai.
            </p>
        </div>
        <!-- Decorative light streaks -->
        <div class="absolute inset-0 opacity-20 pointer-events-none">
            <div class="absolute -left-full top-0 w-full h-full bg-white/30 skew-x-[30deg] animate-slide-right-slow">
            </div>
            <div class="absolute -right-full top-0 w-full h-full bg-white/30 skew-x-[30deg] animate-slide-left-slow">
            </div>
        </div>
    </div>

    <main id="app-content" class="container mx-auto px-4 py-8 flex-grow animate-fade-in pb-20 md:pb-8">
        <!-- N·ªôi dung s·∫Ω ƒë∆∞·ª£c n·∫°p ƒë·ªông b·ªüi c√°c module JS -->
        <div class="flex flex-col items-center justify-center h-64">
            <div class="w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mb-4"></div>
            <p class="text-blue-800 font-bold animate-pulse">ƒêang t·∫£i v≈© tr·ª• ki·∫øn th·ª©c...</p>
        </div>
    </main>

    <footer
        class="py-6 px-4 mt-8 bg-white/40 dark:bg-slate-900/60 backdrop-blur-md border-t border-white/50 dark:border-slate-800 w-full flex-none">
        <div class="container mx-auto text-center">
            <p class="text-[10px] font-black text-gray-400 dark:text-slate-500 uppercase tracking-[0.3em] mb-2">¬© 2026
                EduRobot - H·ªá th·ªëng
                h·ªçc t·∫≠p th√¥ng minh</p>
            <p class="text-sm font-bold text-blue-600 dark:text-blue-400">Ph√°t tri·ªÉn b·ªüi L√ä TH√ÄNH LONG</p>
        </div>
    </footer>

    <!-- Student Info Modal -->
    <div id="student-modal"
        class="fixed inset-0 z-[100] hidden items-center justify-center bg-black/60 backdrop-blur-sm transition-opacity">
        <div class="bg-white rounded-3xl p-6 sm:p-8 w-[90%] max-w-md shadow-2xl scale-95 transition-transform duration-300 transform-gpu"
            id="student-modal-content">
            <h3 class="text-2xl font-black text-blue-800 mb-2 uppercase tracking-wide text-center">B·∫Øt ƒë·∫ßu n·ªôp b√†i</h3>
            <p class="text-gray-500 text-sm font-medium mb-6 text-center italic">B·∫°n h√£y nh·∫≠p ƒë√∫ng th√¥ng tin ƒë·ªÉ Th·∫ßy/C√¥
                nh·∫≠n ra b·∫°n nh√©!</p>

            <div class="space-y-4">
                <!-- Name -->
                <div>
                    <label class="block text-xs font-bold text-gray-700 uppercase tracking-widest mb-1 ml-1">H·ªç v√†
                        T√™n</label>
                    <input type="text" id="studentName" placeholder="VD: Nguy·ªÖn VƒÉn A"
                        class="w-full bg-gray-50 border-2 border-gray-200 rounded-xl px-4 py-3 text-sm font-bold text-gray-800 focus:border-blue-500 focus:bg-white outline-none transition-all placeholder:text-gray-400">
                </div>

                <!-- School -->
                <div>
                    <label class="block text-xs font-bold text-gray-700 uppercase tracking-widest mb-1 ml-1">Tr∆∞·ªùng Ti·ªÉu
                        h·ªçc</label>
                    <div class="relative">
                        <select id="schoolSelect" onchange="window.checkSchool()"
                            class="w-full bg-gray-50 border-2 border-gray-200 rounded-xl px-4 py-3 text-sm font-bold text-gray-800 focus:border-blue-500 focus:bg-white outline-none transition-all appearance-none">
                            <option value="">-- Ch·ªçn tr∆∞·ªùng --</option>
                            <option value="Ti·ªÉu h·ªçc ƒê·ªó VƒÉn N·∫°i">Ti·ªÉu h·ªçc ƒê·ªó VƒÉn N·∫°i</option>
                            <option value="Kh√°c">Tr∆∞·ªùng Kh√°c...</option>
                        </select>
                        <div
                            class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-gray-500">
                            <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </div>
                    </div>
                </div>

                <!-- Other School (Hidden) -->
                <div id="otherSchoolContainer" class="hidden">
                    <input type="text" id="otherSchool" placeholder="Nh·∫≠p t√™n tr∆∞·ªùng c·ªßa b·∫°n..."
                        class="w-full bg-gray-50 border-2 border-blue-200 rounded-xl px-4 py-3 text-sm font-bold text-blue-800 focus:border-blue-500 focus:bg-white outline-none transition-all placeholder:text-blue-300">
                </div>

                <!-- Class -->
                <div>
                    <label class="block text-xs font-bold text-gray-700 uppercase tracking-widest mb-1 ml-1">L·ªõp</label>
                    <div class="relative">
                        <select id="studentClass"
                            class="w-full bg-gray-50 border-2 border-gray-200 rounded-xl px-4 py-3 text-sm font-bold text-gray-800 focus:border-blue-500 focus:bg-white outline-none transition-all appearance-none">
                            <option value="">-- Ch·ªçn l·ªõp --</option>
                            <option value="5/1">L·ªõp 5/1</option>
                            <option value="5/2">L·ªõp 5/2</option>
                            <option value="5/3">L·ªõp 5/3</option>
                            <option value="5/4">L·ªõp 5/4</option>
                        </select>
                        <div
                            class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-gray-500">
                            <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-8 flex gap-3">
                <button onclick="window.closeStudentModal()"
                    class="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-600 font-bold py-3 rounded-xl transition-colors active:scale-95 text-sm uppercase">ƒê√≥ng</button>
                <button id="btn-save-student" onclick="window.saveStudentInfo()"
                    class="flex-[2] bg-blue-600 hover:bg-blue-700 text-white font-black py-3 rounded-xl transition-colors shadow-lg shadow-blue-200 active:scale-95 text-sm uppercase flex justify-center items-center gap-2">
                    L∆∞u & N·ªôp B√†i <span class="text-xs">üöÄ</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Teacher Auth Modal -->
    <div id="teacher-auth-modal"
        class="fixed inset-0 z-[100] hidden items-center justify-center bg-black/60 backdrop-blur-sm transition-opacity">
        <div class="bg-white rounded-3xl p-6 sm:p-8 w-[90%] max-w-sm shadow-2xl scale-95 transition-transform duration-300 transform-gpu"
            id="teacher-auth-content">
            <h3 class="text-xl font-black text-rose-600 mb-2 uppercase tracking-wide text-center">Khu v·ª±c Gi√°o Vi√™n</h3>
            <p class="text-gray-500 text-xs font-medium mb-6 text-center">Nh·∫≠p m·∫≠t kh·∫©u ƒë·ªÉ truy c·∫≠p trang qu·∫£n l√Ω v√† t·∫£i
                d·ªØ li·ªáu b·∫£ng ƒëi·ªÉm.</p>

            <input type="password" id="teacherPassword" placeholder="M·∫≠t kh·∫©u..."
                class="w-full bg-gray-50 border-2 border-gray-200 rounded-xl px-4 py-3 text-center text-lg font-bold text-gray-800 focus:border-rose-400 focus:ring-4 focus:ring-rose-50 outline-none transition-all placeholder:text-gray-300 tracking-widest mb-6">

            <div class="flex gap-3">
                <button onclick="window.closeTeacherAuthModal()"
                    class="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-600 font-bold py-3 rounded-xl transition-colors active:scale-95 text-sm uppercase">ƒê√≥ng</button>
                <button onclick="window.verifyTeacherPassword()"
                    class="flex-1 bg-rose-500 hover:bg-rose-600 text-white font-black py-3 rounded-xl transition-colors shadow-lg shadow-rose-200 active:scale-95 text-sm uppercase">ƒêƒÉng
                    nh·∫≠p</button>
            </div>
        </div>
    </div>

    <!-- Dark Mode Logic (run early to prevent flash) -->
    <script>
        function initDarkMode() {
            const saved = localStorage.getItem('edurobot_dark_mode');
            if (saved === 'true' || (!saved && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
            }
            updateDarkModeIcon();
        }

        function toggleDarkMode() {
            document.documentElement.classList.toggle('dark');
            const isDark = document.documentElement.classList.contains('dark');
            localStorage.setItem('edurobot_dark_mode', isDark);
            updateDarkModeIcon();
        }

        function updateDarkModeIcon() {
            const icon = document.getElementById('dark-mode-icon');
            if (!icon) return;
            const isDark = document.documentElement.classList.contains('dark');
            if (isDark) {
                icon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>';
            } else {
                icon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>';
            }
        }

        initDarkMode();
    </script>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
    <script src="js/firebase-logic.js"></script>

    <!-- Ti·∫øng Vi·ªát 5 Modules -->
    <script src="js/vietnamese-modules/ai-grader.js"></script>
    <script src="js/vietnamese-modules/interactive-exercises.js"></script>
    <script src="js/vietnamese-modules/ltvc-core.js"></script>
    <script src="js/vietnamese-modules/ltvc_patch.js"></script>
    <script src="js/vietnamese-modules/lesson-engine.js"></script>

    <script>
        // Fullscreen toggle logic
        function toggleFullScreen() {
            if (!document.fullscreenElement &&    // alternative standard method
                !document.mozFullScreenElement && !document.webkitFullscreenElement && !document.msFullscreenElement) {  // current working methods
                if (document.documentElement.requestFullscreen) {
                    document.documentElement.requestFullscreen();
                } else if (document.documentElement.msRequestFullscreen) {
                    document.documentElement.msRequestFullscreen();
                } else if (document.documentElement.mozRequestFullScreen) {
                    document.documentElement.mozRequestFullScreen();
                } else if (document.documentElement.webkitRequestFullscreen) {
                    document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);
                }
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.msExitFullscreen) {
                    document.msExitFullscreen();
                } else if (document.mozCancelFullScreen) {
                    document.mozCancelFullScreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                }
            }
        }

        // UI scripts for modals
        window.openTeacherAuthModal = function () {
            const modal = document.getElementById('teacher-auth-modal');
            const content = document.getElementById('teacher-auth-content');
            modal.classList.remove('hidden');
            modal.classList.add('flex');
            setTimeout(() => content.classList.replace('scale-95', 'scale-100'), 10);
            document.getElementById('teacherPassword').focus();
        };

        window.closeTeacherAuthModal = function () {
            const modal = document.getElementById('teacher-auth-modal');
            const content = document.getElementById('teacher-auth-content');
            content.classList.replace('scale-100', 'scale-95');
            setTimeout(() => {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
                document.getElementById('teacherPassword').value = '';
            }, 300);
        };

        window.verifyTeacherPassword = function () {
            const pwd = document.getElementById('teacherPassword').value;
            // Password hardcoded - simple security based on user request
            if (pwd === "gv123" || pwd === "admin") {
                window.location.href = "teacher.html";
            } else {
                alert("M·∫≠t kh·∫©u kh√¥ng ƒë√∫ng. Vui l√≤ng th·ª≠ l·∫°i!");
            }
        };
    </script>

    <script src="js/app.js" type="module"></script>
</body>

</html>